<?xml version="1.0" encoding="utf-8"?>
<Page
    x:Class="AppPaint.Views.ProfilePage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:AppPaint.Views"
    xmlns:models="using:Data.Models"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">

    <ScrollViewer>
        <Grid Style="{StaticResource PageContainerStyle}">
   <Grid.RowDefinitions>
    <RowDefinition Height="Auto"/>
          <RowDefinition Height="*"/>
     </Grid.RowDefinitions>

       <!-- Page Header -->
    <StackPanel Grid.Row="0" Style="{StaticResource PageHeaderStyle}">
        <StackPanel Orientation="Horizontal" Spacing="12">
             <FontIcon FontFamily="{StaticResource SymbolThemeFontFamily}" 
    Glyph="&#xE77B;" 
     FontSize="32"
        Foreground="{ThemeResource AccentTextFillColorPrimaryBrush}"
   VerticalAlignment="Center"/>
        <TextBlock Text="Profile and Settings" 
           Style="{StaticResource TitleLargeTextBlockStyle}"
               FontWeight="Bold"
                VerticalAlignment="Center"/>
     </StackPanel>
     <TextBlock Text="Manage your preferences and application settings"
Style="{StaticResource BodyTextBlockStyle}"
        Opacity="0.7"/>
     </StackPanel>

    <!-- Content -->
            <Grid Grid.Row="1">
 <Grid.ColumnDefinitions>
<ColumnDefinition Width="250"/>
     <ColumnDefinition Width="*"/>
             </Grid.ColumnDefinitions>

          <!-- Profile List -->
            <Border Grid.Column="0" 
       Style="{StaticResource AppCardStyle}"
       Margin="0,0,16,0"
       VerticalAlignment="Stretch">
         <StackPanel Spacing="12">
        <TextBlock Text="Profiles" Style="{StaticResource SectionSubtitleStyle}"/>
             
           <Button Style="{StaticResource AppAccentButtonStyle}" 
        HorizontalAlignment="Stretch"
     Click="CreateProfile_Click">
              <StackPanel Orientation="Horizontal" Spacing="8">
        <FontIcon FontFamily="{StaticResource SymbolThemeFontFamily}" Glyph="&#xE710;"/>
     <TextBlock Text="New Profile"/>
   </StackPanel>
    </Button>

                <ListView ItemsSource="{x:Bind ViewModel.Profiles, Mode=OneWay}"
            SelectedItem="{x:Bind ViewModel.SelectedProfile, Mode=TwoWay}"
     SelectionMode="Single"
          Height="400">
     <ListView.ItemTemplate>
        <DataTemplate x:DataType="models:Profile">
                <StackPanel Spacing="4" Padding="8">
      <StackPanel Orientation="Horizontal" Spacing="8">
      <TextBlock Text="{x:Bind Name}" FontWeight="SemiBold"/>
        <Border Background="{ThemeResource AccentFillColorDefaultBrush}"
   CornerRadius="4"
     Padding="6,2"
       Visibility="{x:Bind IsActive, Mode=OneWay}">
         <TextBlock Text="ACTIVE" 
       FontSize="10"
         FontWeight="Bold"
             Foreground="White"/>
             </Border>
              </StackPanel>
        <TextBlock Opacity="0.7" Style="{StaticResource CaptionTextBlockStyle}">
                <Run Text="{x:Bind DefaultCanvasWidth}"/>
   <Run Text="×"/>
       <Run Text="{x:Bind DefaultCanvasHeight}"/>
                <Run Text=" • "/>
   <Run Text="{x:Bind Theme}"/>
 </TextBlock>
            </StackPanel>
 </DataTemplate>
              </ListView.ItemTemplate>
            </ListView>
       </StackPanel>
     </Border>

     <!-- Profile Details -->
      <ScrollViewer Grid.Column="1">
            <StackPanel Spacing="24">
  <!-- Profile Info Card -->
      <Border Style="{StaticResource AppCardStyle}">
       <StackPanel Spacing="16">
    <TextBlock Text="Profile Information" 
     Style="{StaticResource SectionSubtitleStyle}"/>

           <TextBox Header="Profile Name" 
   PlaceholderText="Enter profile name"
          Text="{x:Bind ViewModel.SelectedProfile.Name, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
          IsEnabled="{x:Bind ViewModel.HasSelectedProfile, Mode=OneWay}"/>

           <ComboBox Header="Theme" 
          PlaceholderText="Select theme"
          SelectedItem="{x:Bind ViewModel.SelectedProfileTheme, Mode=TwoWay}"
     HorizontalAlignment="Stretch"
    IsEnabled="{x:Bind ViewModel.HasSelectedProfile, Mode=OneWay}">
       <x:String>System</x:String>
            <x:String>Light</x:String>
         <x:String>Dark</x:String>
</ComboBox>
     </StackPanel>
          </Border>

       <!-- Canvas Settings Card -->
     <Border Style="{StaticResource AppCardStyle}">
             <StackPanel Spacing="16">
   <TextBlock Text="Default Canvas Settings" 
            Style="{StaticResource SectionSubtitleStyle}"/>

           <Grid>
           <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*"/>
          <ColumnDefinition Width="16"/>
         <ColumnDefinition Width="*"/>
     </Grid.ColumnDefinitions>

         <NumberBox Grid.Column="0" 
   Header="Canvas Width" 
   PlaceholderText="Width"
   Value="{x:Bind ViewModel.SelectedProfile.DefaultCanvasWidth, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
       Minimum="400"
               Maximum="2000"
    SpinButtonPlacementMode="Inline"
                 IsEnabled="{x:Bind ViewModel.HasSelectedProfile, Mode=OneWay}"/>

               <NumberBox Grid.Column="2" 
       Header="Canvas Height" 
      PlaceholderText="Height"
    Value="{x:Bind ViewModel.SelectedProfile.DefaultCanvasHeight, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
   Minimum="300"
     Maximum="1500"
            SpinButtonPlacementMode="Inline"
  IsEnabled="{x:Bind ViewModel.HasSelectedProfile, Mode=OneWay}"/>
       </Grid>
         </StackPanel>
         </Border>

               <!-- Color Preferences Card -->
    <Border Style="{StaticResource AppCardStyle}">
              <StackPanel Spacing="16">
 <TextBlock Text="Default Colors" 
    Style="{StaticResource SectionSubtitleStyle}"/>

          <Grid>
        <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*"/>
      <ColumnDefinition Width="16"/>
    <ColumnDefinition Width="*"/>
     <ColumnDefinition Width="16"/>
    <ColumnDefinition Width="*"/>
       </Grid.ColumnDefinitions>

    <StackPanel Grid.Column="0" Spacing="8">
      <TextBlock Text="Stroke Color"/>
         <ColorPicker ColorSpectrumShape="Ring"
   IsColorSliderVisible="True"
      IsAlphaEnabled="False"
        ColorChanged="StrokeColor_Changed"
       IsEnabled="{x:Bind ViewModel.HasSelectedProfile, Mode=OneWay}"/>
          </StackPanel>

    <StackPanel Grid.Column="2" Spacing="8">
          <TextBlock Text="Fill Color"/>
          <ColorPicker ColorSpectrumShape="Ring"
        IsColorSliderVisible="True"
          IsAlphaEnabled="False"
         ColorChanged="FillColor_Changed"
  IsEnabled="{x:Bind ViewModel.HasSelectedProfile, Mode=OneWay}"/>
          </StackPanel>

    <StackPanel Grid.Column="4" Spacing="8">
              <TextBlock Text="Background"/>
            <ColorPicker ColorSpectrumShape="Ring"
    IsColorSliderVisible="True"
     IsAlphaEnabled="False"
   ColorChanged="BackgroundColor_Changed"
        IsEnabled="{x:Bind ViewModel.HasSelectedProfile, Mode=OneWay}"/>
 </StackPanel>
        </Grid>

          <NumberBox Header="Default Stroke Thickness" 
   Value="{x:Bind ViewModel.SelectedProfile.DefaultStrokeThickness, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
           Minimum="1"
      Maximum="20"
                   SpinButtonPlacementMode="Inline"
 IsEnabled="{x:Bind ViewModel.HasSelectedProfile, Mode=OneWay}"/>
   </StackPanel>
 </Border>

     <!-- Actions -->
            <StackPanel Orientation="Horizontal" Spacing="12">
    <Button Style="{StaticResource AppAccentButtonStyle}"
      Command="{x:Bind ViewModel.SaveProfileCommand}"
   IsEnabled="{x:Bind ViewModel.HasSelectedProfile, Mode=OneWay}">
       <StackPanel Orientation="Horizontal" Spacing="8">
   <FontIcon FontFamily="{StaticResource SymbolThemeFontFamily}" Glyph="&#xE74E;"/>
 <TextBlock Text="Save Changes"/>
               </StackPanel>
      </Button>

       <Button Command="{x:Bind ViewModel.DeleteProfileCommand}"
            IsEnabled="{x:Bind ViewModel.CanDeleteProfile, Mode=OneWay}">
            <StackPanel Orientation="Horizontal" Spacing="8">
           <FontIcon FontFamily="{StaticResource SymbolThemeFontFamily}" Glyph="&#xE74D;"/>
     <TextBlock Text="Delete Profile"/>
      </StackPanel>
    </Button>

        <Button Command="{x:Bind ViewModel.SetActiveProfileCommand}"
      IsEnabled="{x:Bind ViewModel.CanSetActiveProfile, Mode=OneWay}">
       <StackPanel Orientation="Horizontal" Spacing="8">
    <FontIcon FontFamily="{StaticResource SymbolThemeFontFamily}" Glyph="&#xE8FB;"/>
       <TextBlock Text="Set as Active"/>
      </StackPanel>
          </Button>
</StackPanel>
   </StackPanel>
        </ScrollViewer>
  </Grid>
        </Grid>
    </ScrollViewer>
</Page>
