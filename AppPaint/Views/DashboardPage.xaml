<?xml version="1.0" encoding="utf-8"?>
<Page
    x:Class="AppPaint.Views.DashboardPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:AppPaint.Views"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">

    <ScrollViewer>
        <Grid Padding="24">
  <Grid.RowDefinitions>
       <RowDefinition Height="Auto"/>
         <RowDefinition Height="Auto"/>
        <RowDefinition Height="*"/>
      </Grid.RowDefinitions>

         <!-- Header -->
            <StackPanel Grid.Row="0" Spacing="8" Margin="0,0,0,24">
      <TextBlock Text="📊 Dashboard"
           Style="{StaticResource TitleLargeTextBlockStyle}"
      FontWeight="Bold"/>
          <TextBlock Text="Overview of your drawings and usage statistics"
     Opacity="0.7"/>
       </StackPanel>

            <!-- Statistics Cards -->
            <Grid Grid.Row="1" Margin="0,0,0,24">
         <Grid.ColumnDefinitions>
   <ColumnDefinition Width="*"/>
        <ColumnDefinition Width="*"/>
          <ColumnDefinition Width="*"/>
        <ColumnDefinition Width="*"/>
             </Grid.ColumnDefinitions>

                <!-- Total Drawings Card -->
 <Border Grid.Column="0" 
            Background="{ThemeResource AccentFillColorDefaultBrush}"
        CornerRadius="8"
      Padding="20"
   Margin="0,0,8,0">
       <StackPanel Spacing="8">
     <FontIcon FontFamily="{StaticResource FluentIconsFontFamily}"
     Glyph="&#xE8F1;"
     FontSize="32"
    Foreground="White"/>
      <TextBlock Text="{x:Bind ViewModel.TotalDrawings, Mode=OneWay}"
      FontSize="32"
FontWeight="Bold"
   Foreground="White"/>
   <TextBlock Text="Total Drawings"
       FontSize="14"
  Foreground="White"
 Opacity="0.9"/>
      </StackPanel>
      </Border>

   <!-- Total Shapes Card -->
    <Border Grid.Column="1"
        Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
 BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
   BorderThickness="1"
 CornerRadius="8"
             Padding="20"
      Margin="4,0">
     <StackPanel Spacing="8">
   <FontIcon FontFamily="{StaticResource FluentIconsFontFamily}"
        Glyph="&#xE91B;"
     FontSize="32"
 Foreground="{ThemeResource AccentTextFillColorPrimaryBrush}"/>
 <TextBlock Text="{x:Bind ViewModel.TotalShapes, Mode=OneWay}"
   FontSize="32"
       FontWeight="Bold"/>
   <TextBlock Text="Total Shapes"
     FontSize="14"
          Opacity="0.7"/>
   </StackPanel>
        </Border>

     <!-- Total Profiles Card -->
  <Border Grid.Column="2"
        Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
     BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
   BorderThickness="1"
     CornerRadius="8"
             Padding="20"
    Margin="4,0">
  <StackPanel Spacing="8">
                 <FontIcon FontFamily="{StaticResource FluentIconsFontFamily}"
         Glyph="&#xE77B;"
 FontSize="32"
     Foreground="{ThemeResource AccentTextFillColorPrimaryBrush}"/>
     <TextBlock Text="{x:Bind ViewModel.TotalProfiles, Mode=OneWay}"
    FontSize="32"
    FontWeight="Bold"/>
   <TextBlock Text="Profiles"
  FontSize="14"
    Opacity="0.7"/>
     </StackPanel>
</Border>

  <!-- Average Shapes Per Drawing Card -->
  <Border Grid.Column="3"
  Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
        BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
          BorderThickness="1"
  CornerRadius="8"
 Padding="20"
      Margin="8,0,0,0">
     <StackPanel Spacing="8">
         <FontIcon FontFamily="{StaticResource FluentIconsFontFamily}"
       Glyph="&#xE9D9;"
       FontSize="32"
     Foreground="{ThemeResource AccentTextFillColorPrimaryBrush}"/>
   <TextBlock Text="{x:Bind ViewModel.AverageShapesPerDrawing, Mode=OneWay}"
      FontSize="32"
    FontWeight="Bold"/>
    <TextBlock Text="Avg Shapes/Drawing"
      FontSize="14"
    Opacity="0.7"/>
            </StackPanel>
       </Border>
   </Grid>

    <!-- Charts and Details -->
            <Grid Grid.Row="2">
      <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
      <RowDefinition Height="Auto"/>
          </Grid.RowDefinitions>

    <!-- Shape Type Distribution -->
      <Border Grid.Row="0"
        Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
 BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
          BorderThickness="1"
      CornerRadius="8"
        Padding="24"
        Margin="0,0,0,16">
     <StackPanel Spacing="16">
               <TextBlock Text="📈 Shape Type Distribution"
      FontSize="20"
     FontWeight="SemiBold"/>

      <ItemsRepeater ItemsSource="{x:Bind ViewModel.ShapeTypeStats, Mode=OneWay}">
        <ItemsRepeater.Layout>
              <StackLayout Spacing="12"/>
     </ItemsRepeater.Layout>
           <ItemsRepeater.ItemTemplate>
         <DataTemplate>
       <Grid>
           <Grid.ColumnDefinitions>
          <ColumnDefinition Width="120"/>
     <ColumnDefinition Width="*"/>
         <ColumnDefinition Width="80"/>
     </Grid.ColumnDefinitions>

     <!-- Shape Type Name -->
         <TextBlock Grid.Column="0"
              Text="{Binding ShapeTypeName}"
  VerticalAlignment="Center"
          FontWeight="SemiBold"/>

     <!-- Progress Bar -->
               <ProgressBar Grid.Column="1"
     Value="{Binding Percentage}"
             Maximum="100"
            Margin="12,0"
     VerticalAlignment="Center"
      Height="20"
           CornerRadius="4"/>

   <!-- Count and Percentage -->
              <StackPanel Grid.Column="2"
            Orientation="Horizontal"
    Spacing="8"
      HorizontalAlignment="Right">
         <TextBlock Text="{Binding Count}"
   FontWeight="Bold"/>
      <TextBlock Opacity="0.7">
 <Run Text="("/>
             <Run Text="{Binding Percentage}"/>
            <Run Text="%)"/>
       </TextBlock>
    </StackPanel>
           </Grid>
        </DataTemplate>
           </ItemsRepeater.ItemTemplate>
              </ItemsRepeater>
             </StackPanel>
  </Border>

       <!-- Recent Activity -->
    <Border Grid.Row="1"
           Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
    BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
            BorderThickness="1"
     CornerRadius="8"
      Padding="24">
        <StackPanel Spacing="16">
       <TextBlock Text="🕒 Recent Drawings"
  FontSize="20"
   FontWeight="SemiBold"/>

              <ListView ItemsSource="{x:Bind ViewModel.RecentDrawings, Mode=OneWay}"
           SelectionMode="None"
       MaxHeight="300">
  <ListView.ItemTemplate>
   <DataTemplate>
         <Grid Padding="12">
 <Grid.ColumnDefinitions>
<ColumnDefinition Width="Auto"/>
     <ColumnDefinition Width="*"/>
     <ColumnDefinition Width="Auto"/>
</Grid.ColumnDefinitions>

     <!-- Icon with Windows 11 Fluent Icons -->
       <FontIcon Grid.Column="0"
            FontFamily="{StaticResource FluentIconsFontFamily}"
     Glyph="&#xE8F1;"
FontSize="24"
   Margin="0,0,16,0"
           Foreground="{ThemeResource AccentTextFillColorPrimaryBrush}"/>

     <!-- Info -->
       <StackPanel Grid.Column="1" Spacing="4">
      <TextBlock Text="{Binding Name}"
  FontWeight="SemiBold"/>
     <TextBlock Opacity="0.7">
  <Run Text="{Binding Shapes.Count}"/>
     <Run Text="shapes • "/>
   <Run Text="{Binding Width}"/>
         <Run Text="×"/>
       <Run Text="{Binding Height}"/>
          </TextBlock>
   </StackPanel>

                <!-- Date -->
       <TextBlock Grid.Column="2"
     Text="{Binding CreatedAt}"
    Opacity="0.7"
   VerticalAlignment="Center"/>
   </Grid>
     </DataTemplate>
      </ListView.ItemTemplate>
  </ListView>
             </StackPanel>
              </Border>
      </Grid>
      </Grid>
    </ScrollViewer>
</Page>
