<Page
    x:Class="AppPaint.Views.TemplateManagerPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="using:AppPaint.Views"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:models="using:Data.Models"
    Background="Transparent"
    mc:Ignorable="d">

    <ScrollViewer>
        <GridView
  Padding="20"
      ItemsSource="{x:Bind ViewModel.Templates, Mode=OneWay}"
            SelectionMode="None">
      <GridView.ItemsPanel>
<ItemsPanelTemplate>
        <ItemsWrapGrid Orientation="Horizontal" />
       </ItemsPanelTemplate>
   </GridView.ItemsPanel>
    <GridView.ItemTemplate>
  <DataTemplate x:DataType="models:DrawingTemplate">
     <Border
   Width="300"
  Height="340"
Margin="8"
      Padding="20"
     Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
  BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
       BorderThickness="1"
     CornerRadius="12">
 <Border.Shadow>
   <ThemeShadow />
 </Border.Shadow>
   <Grid>
      <Grid.RowDefinitions>
    <RowDefinition Height="Auto" />
    <RowDefinition Height="150" />
    <RowDefinition Height="Auto" />
<RowDefinition Height="Auto" />
         </Grid.RowDefinitions>

    <!--  Title  -->
  <TextBlock
Grid.Row="0"
  Margin="0,0,0,12"
   FontSize="16"
   FontWeight="SemiBold"
    Foreground="{ThemeResource TextFillColorPrimaryBrush}"
  Text="{x:Bind Name}"
 TextTrimming="CharacterEllipsis" />

     <!--  Preview Canvas  -->
   <Border
  Grid.Row="1"
   Margin="0,0,0,12"
      BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
    BorderThickness="2"
    CornerRadius="8">
    <Border.Background>
        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
<GradientStop Offset="0" Color="{ThemeResource SystemFillColorNeutralBackgroundBrush}" />
 <GradientStop Offset="1" Color="{ThemeResource SystemFillColorSolidNeutralBackgroundBrush}" />
   </LinearGradientBrush>
      </Border.Background>
       <Viewbox
     Margin="16"
    Stretch="Uniform"
       StretchDirection="DownOnly">
    <Canvas
  x:Name="PreviewCanvas"
Width="800"
   Height="600"
       Loaded="PreviewCanvas_Loaded"
Tag="{x:Bind}" />
     </Viewbox>
</Border>

<!--  Info  -->
    <StackPanel
    Grid.Row="2"
 Margin="0,0,0,16"
  Spacing="8">
    <StackPanel Orientation="Horizontal" Spacing="8">
<Border
Padding="8,4"
    Background="{ThemeResource AccentFillColorTertiaryBrush}"
CornerRadius="4">
    <StackPanel Orientation="Horizontal" Spacing="6">
       <FontIcon
FontFamily="{StaticResource FluentIconsFontFamily}"
FontSize="12"
        Foreground="{ThemeResource AccentTextFillColorPrimaryBrush}"
    Glyph="&#xE91B;" />
       <TextBlock 
     FontSize="12"
 FontWeight="SemiBold"
      Foreground="{ThemeResource AccentTextFillColorPrimaryBrush}">
       <Run Text="{x:Bind Shapes.Count}" />
    <Run Text="shapes" />
    </TextBlock>
  </StackPanel>
     </Border>
   </StackPanel>
 <TextBlock
     FontSize="11"
   Foreground="{ThemeResource TextFillColorTertiaryBrush}"
        Text="{x:Bind CreatedAt}" />
   </StackPanel>

   <!--  Actions  -->
  <StackPanel
   Grid.Row="3"
Orientation="Horizontal"
       Spacing="12">
    <Button
      Padding="16,10"
Click="InsertTemplate_Click"
        CornerRadius="6"
  FontSize="13"
Style="{StaticResource AppAccentButtonStyle}"
       Tag="{x:Bind}">
    <StackPanel Orientation="Horizontal" Spacing="8">
 <FontIcon 
    FontFamily="{StaticResource FluentIconsFontFamily}" 
     FontSize="14"
   Glyph="&#xE710;" />
     <TextBlock FontWeight="SemiBold" Text="Insert" />
   </StackPanel>
    </Button>
    <Button
  Padding="16,10"
    Click="DeleteTemplate_Click"
   CornerRadius="6"
     FontSize="13"
  Tag="{x:Bind}">
 <StackPanel Orientation="Horizontal" Spacing="8">
  <FontIcon 
   FontFamily="{StaticResource FluentIconsFontFamily}" 
       FontSize="14"
    Foreground="{ThemeResource SystemFillColorCriticalBrush}"
      Glyph="&#xE74D;" />
     <TextBlock Text="Delete" />
       </StackPanel>
   </Button>
   </StackPanel>
    </Grid>
     </Border>
     </DataTemplate>
 </GridView.ItemTemplate>
   </GridView>
</ScrollViewer>
</Page>
