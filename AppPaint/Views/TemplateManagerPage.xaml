<?xml version="1.0" encoding="utf-8"?>
<Page
    x:Class="AppPaint.Views.TemplateManagerPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:AppPaint.Views"
    xmlns:models="using:Data.Models"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">

    <Grid Style="{StaticResource PageContainerStyle}">
      <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
          <RowDefinition Height="*"/>
  </Grid.RowDefinitions>

        <!-- Page Header -->
        <StackPanel Grid.Row="0" Style="{StaticResource PageHeaderStyle}">
 <StackPanel Orientation="Horizontal" Spacing="12">
                <FontIcon FontFamily="{StaticResource SymbolThemeFontFamily}" 
        Glyph="&#xE8B7;" 
         FontSize="32"
    Foreground="{ThemeResource AccentTextFillColorPrimaryBrush}"
      VerticalAlignment="Center"/>
        <TextBlock Text="Shape Templates" 
      Style="{StaticResource TitleLargeTextBlockStyle}"
      FontWeight="Bold"
      VerticalAlignment="Center"/>
            </StackPanel>
            <TextBlock Text="Quick-insert reusable shapes into your drawings"
          Style="{StaticResource BodyTextBlockStyle}"
      Opacity="0.7"/>
        </StackPanel>

     <!-- Content Area -->
        <Grid Grid.Row="1">
         <Grid.RowDefinitions>
             <RowDefinition Height="Auto"/>
    <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

        <!-- Toolbar -->
            <StackPanel Grid.Row="0" Orientation="Horizontal" Spacing="12" Margin="0,0,0,16">
     <Button Style="{StaticResource AppAccentButtonStyle}"
    Command="{x:Bind ViewModel.RefreshTemplatesCommand}">
  <StackPanel Orientation="Horizontal" Spacing="8">
  <FontIcon FontFamily="{StaticResource SymbolThemeFontFamily}" Glyph="&#xE72C;"/>
       <TextBlock Text="Refresh"/>
        </StackPanel>
     </Button>
            </StackPanel>

            <!-- Templates Grid -->
      <ScrollViewer Grid.Row="1">
      <GridView ItemsSource="{x:Bind ViewModel.Templates, Mode=OneWay}"
  SelectionMode="None">
     <GridView.ItemTemplate>
        <DataTemplate x:DataType="models:DrawingTemplate">
     <Border BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                BorderThickness="1"
 CornerRadius="8"
        Width="280"
   Height="240"
      Padding="16"
       Margin="8">
     <Grid>
   <Grid.RowDefinitions>
  <RowDefinition Height="*"/>
        <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

         <!-- Info -->
   <StackPanel Grid.Row="0" Spacing="8">
        <TextBlock Text="{x:Bind Name}" 
            FontWeight="SemiBold"
        FontSize="18"/>
       <TextBlock Opacity="0.7">
     <Run Text="{x:Bind Shapes.Count}"/>
     <Run Text="shape(s)"/>
          </TextBlock>
    <TextBlock Text="{x:Bind CreatedAt}" 
         FontSize="12"
           Opacity="0.5"/>
        </StackPanel>

        <!-- Actions -->
   <StackPanel Grid.Row="1" Orientation="Horizontal" Spacing="8">
      <Button Content="Insert to Canvas" 
             Click="InsertTemplate_Click"
   Tag="{x:Bind}"
      Style="{StaticResource AppAccentButtonStyle}"/>
      <Button Content="Delete"
        Click="DeleteTemplate_Click"
         Tag="{x:Bind}"/>
       </StackPanel>
              </Grid>
         </Border>
      </DataTemplate>
 </GridView.ItemTemplate>
       </GridView>
    </ScrollViewer>
 </Grid>
    </Grid>
</Page>
