<Page
    x:Class="AppPaint.Views.TemplateManagerPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:AppPaint.Views"
    xmlns:models="using:Data.Models"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    Background="Transparent">

	<ScrollViewer>
		<GridView ItemsSource="{x:Bind ViewModel.Templates, Mode=OneWay}"
		 SelectionMode="None"
			   Padding="0">
			<GridView.ItemTemplate>
				<DataTemplate x:DataType="models:DrawingTemplate">
					<Border BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
					  BorderThickness="1"
					 CornerRadius="8"
						Width="280"
								Height="300"
						   Padding="16"
							  Margin="8">
						<Grid>
							<Grid.RowDefinitions>
								<RowDefinition Height="Auto"/>
								<RowDefinition Height="120"/>
								<RowDefinition Height="Auto"/>
								<RowDefinition Height="Auto"/>
							</Grid.RowDefinitions>

							<!-- Title -->
							<TextBlock Grid.Row="0"
									   Text="{x:Bind Name}"
									   FontWeight="SemiBold"
									   FontSize="16"
									   Margin="0,0,0,8"/>

							<!-- Preview Canvas -->
							<Border Grid.Row="1"
									Background="{ThemeResource LayerFillColorDefaultBrush}"
									BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
									BorderThickness="1"
									CornerRadius="4"
									Margin="0,0,0,8">
								<Canvas x:Name="PreviewCanvas"
										Width="200"
										Height="100"
										HorizontalAlignment="Center"
										VerticalAlignment="Center"
										Loaded="PreviewCanvas_Loaded"
										Tag="{x:Bind}"/>
							</Border>

							<!-- Info -->
							<StackPanel Grid.Row="2" Spacing="4" Margin="0,0,0,8">
								<TextBlock Opacity="0.7" FontSize="12">
									<Run Text="{x:Bind Shapes.Count}"/>
									<Run Text="shape(s)"/>
								</TextBlock>
								<TextBlock Text="{x:Bind CreatedAt}"
										   FontSize="11"
										   Opacity="0.5"/>
							</StackPanel>

							<!-- Actions -->
							<StackPanel Grid.Row="3" Orientation="Horizontal" Spacing="8">
								<Button Content="Insert"
										Click="InsertTemplate_Click"
										Tag="{x:Bind}"
										Style="{StaticResource AppAccentButtonStyle}"
										FontSize="12"
										Padding="12,6"/>
								<Button Content="Delete"
										Click="DeleteTemplate_Click"
										Tag="{x:Bind}"
										FontSize="12"
										Padding="12,6"/>
							</StackPanel>
						</Grid>
					</Border>
				</DataTemplate>
			</GridView.ItemTemplate>
		</GridView>
	</ScrollViewer>
</Page>
