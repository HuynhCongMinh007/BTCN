<?xml version="1.0" encoding="utf-8"?>
<Page
    x:Class="AppPaint.Views.DrawingCanvasPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:AppPaint.Views"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">

  <Grid>
        <Grid.RowDefinitions>
 <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

  <!-- Toolbar -->
 <Border Grid.Row="0" 
    Background="{ThemeResource LayerFillColorDefaultBrush}"
   BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
      BorderThickness="0,0,0,1">
   <Grid Padding="12">
    <Grid.ColumnDefinitions>
     <ColumnDefinition Width="Auto"/>
  <ColumnDefinition Width="*"/>
       <ColumnDefinition Width="Auto"/>
    </Grid.ColumnDefinitions>

      <!-- Left Toolbar - Shape Tools -->
    <StackPanel Grid.Column="0" Orientation="Horizontal" Spacing="8">
 <TextBlock Text="Tools:" VerticalAlignment="Center" Margin="0,0,12,0" FontWeight="SemiBold"/>
   
      <!-- Line Button -->
    <ToggleButton x:Name="LineButton" 
 Width="40" Height="40" 
   ToolTipService.ToolTip="Line (Straight)"
       Click="ShapeButton_Click"
 Tag="Line">
            <Viewbox Width="20" Height="20">
    <Canvas Width="24" Height="24">
        <Line X1="4" Y1="20" X2="20" Y2="4" 
     Stroke="{ThemeResource TextFillColorPrimaryBrush}" 
          StrokeThickness="2"/>
                </Canvas>
            </Viewbox>
   </ToggleButton>
     
     <!-- Rectangle Button -->
     <ToggleButton x:Name="RectangleButton" 
 Width="40" Height="40" 
   ToolTipService.ToolTip="Rectangle"
    Click="ShapeButton_Click"
    Tag="Rectangle">
            <Viewbox Width="20" Height="20">
     <Canvas Width="24" Height="24">
           <Rectangle Width="16" Height="12" 
         Canvas.Left="4" Canvas.Top="6"
             Stroke="{ThemeResource TextFillColorPrimaryBrush}" 
  StrokeThickness="2"/>
                </Canvas>
  </Viewbox>
        </ToggleButton>
   
   <!-- Oval Button -->
     <ToggleButton x:Name="OvalButton" 
        Width="40" Height="40" 
          ToolTipService.ToolTip="Oval (Ellipse)"
  Click="ShapeButton_Click"
   Tag="Oval">
            <Viewbox Width="20" Height="20">
                <Canvas Width="24" Height="24">
   <Ellipse Width="16" Height="10" 
        Canvas.Left="4" Canvas.Top="7"
          Stroke="{ThemeResource TextFillColorPrimaryBrush}" 
      StrokeThickness="2"/>
    </Canvas>
            </Viewbox>
        </ToggleButton>
   
        <!-- Circle Button -->
<ToggleButton x:Name="CircleButton" 
 Width="40" Height="40" 
    ToolTipService.ToolTip="Circle"
  Click="ShapeButton_Click"
       Tag="Circle">
            <Viewbox Width="20" Height="20">
        <Canvas Width="24" Height="24">
           <Ellipse Width="14" Height="14" 
       Canvas.Left="5" Canvas.Top="5"
 Stroke="{ThemeResource TextFillColorPrimaryBrush}" 
       StrokeThickness="2"/>
         </Canvas>
            </Viewbox>
        </ToggleButton>
      
   <!-- Triangle Button -->
      <ToggleButton x:Name="TriangleButton" 
    Width="40" Height="40" 
 ToolTipService.ToolTip="Triangle"
  Click="ShapeButton_Click"
    Tag="Triangle">
            <Viewbox Width="20" Height="20">
           <Canvas Width="24" Height="24">
 <Polygon Points="12,4 4,20 20,20"
       Stroke="{ThemeResource TextFillColorPrimaryBrush}" 
         StrokeThickness="2"/>
      </Canvas>
       </Viewbox>
        </ToggleButton>
 
      <!-- Polygon Button -->
      <ToggleButton x:Name="PolygonButton" 
     Width="40" Height="40" 
   ToolTipService.ToolTip="Polygon (Multi-point)"
   Click="ShapeButton_Click"
   Tag="Polygon">
            <Viewbox Width="20" Height="20">
    <Canvas Width="24" Height="24">
         <Polygon Points="12,3 20,8 18,18 6,18 4,8"
    Stroke="{ThemeResource TextFillColorPrimaryBrush}" 
          StrokeThickness="2"/>
         </Canvas>
   </Viewbox>
        </ToggleButton>
  </StackPanel>

 <!-- Middle Toolbar - Color & Stroke -->
          <StackPanel Grid.Column="1" Orientation="Horizontal" Spacing="12" HorizontalAlignment="Center">
  <StackPanel Orientation="Horizontal" Spacing="8">
        <TextBlock Text="Color:" VerticalAlignment="Center"/>
  <ColorPicker x:Name="StrokeColorPicker" 
   ColorSpectrumShape="Ring"
      IsColorSliderVisible="False"
  IsColorChannelTextInputVisible="False"
IsHexInputVisible="False"
         IsAlphaEnabled="False"
         ColorChanged="StrokeColorPicker_ColorChanged"
  Width="40" Height="40"/>
  </StackPanel>
         
         <Border Width="1" Background="{ThemeResource CardStrokeColorDefaultBrush}"/>
 
        <StackPanel Orientation="Horizontal" Spacing="8">
       <TextBlock Text="Thickness:" VerticalAlignment="Center"/>
   <Slider x:Name="StrokeThicknessSlider" 
Minimum="1" Maximum="20" 
        Value="{x:Bind ViewModel.StrokeThickness, Mode=TwoWay}"
Width="120" VerticalAlignment="Center"/>
         <TextBlock Text="{x:Bind StrokeThicknessSlider.Value, Mode=OneWay}" 
   VerticalAlignment="Center" Width="30"/>
    </StackPanel>

  <Border Width="1" Background="{ThemeResource CardStrokeColorDefaultBrush}"/>

         <!-- Stroke Style ComboBox -->
     <StackPanel Orientation="Horizontal" Spacing="8">
     <TextBlock Text="Style:" VerticalAlignment="Center"/>
      <ComboBox x:Name="StrokeStyleComboBox"
       SelectedIndex="0"
            SelectionChanged="StrokeStyleComboBox_SelectionChanged"
          MinWidth="120"
   VerticalAlignment="Center">
  <ComboBoxItem Content="Solid" Tag="Solid"/>
    <ComboBoxItem Content="Dash" Tag="Dash"/>
           <ComboBoxItem Content="Dot" Tag="Dot"/>
     <ComboBoxItem Content="DashDot" Tag="DashDot"/>
    <ComboBoxItem Content="DashDotDot" Tag="DashDotDot"/>
   </ComboBox>
     </StackPanel>

  <Border Width="1" Background="{ThemeResource CardStrokeColorDefaultBrush}"/>
       
     <CheckBox x:Name="FillCheckBox" 
   Content="Fill Shape"
      IsChecked="{x:Bind ViewModel.IsFilled, Mode=TwoWay}"/>
       </StackPanel>

 <!-- Right Toolbar - Actions -->
    <StackPanel Grid.Column="2" Orientation="Horizontal" Spacing="8">
        <!-- Canvas Size Picker -->
        <ComboBox x:Name="CanvasSizeComboBox"
    Header="Canvas Size"
        SelectionChanged="CanvasSizeComboBox_SelectionChanged"
SelectedIndex="2"
             MinWidth="120"
            ToolTipService.ToolTip="Select canvas size">
       <ComboBoxItem Content="640x480" Tag="640x480"/>
      <ComboBoxItem Content="800x600" Tag="800x600"/>
            <ComboBoxItem Content="1024x768" Tag="1024x768"/>
 <ComboBoxItem Content="1280x720" Tag="1280x720"/>
   <ComboBoxItem Content="1920x1080" Tag="1920x1080"/>
        </ComboBox>

   <!-- Background Color Picker -->
        <StackPanel Orientation="Horizontal" Spacing="8">
        <TextBlock Text="Background:" VerticalAlignment="Center"/>
            <ColorPicker x:Name="BackgroundColorPicker"
       ColorSpectrumShape="Ring"
         IsColorSliderVisible="False"
           IsColorChannelTextInputVisible="False"
    IsHexInputVisible="False"
     IsAlphaEnabled="False"
 ColorChanged="BackgroundColorPicker_ColorChanged"
                  Width="40" Height="40"
                  ToolTipService.ToolTip="Canvas background color"/>
   </StackPanel>

        <Border Width="1" Background="{ThemeResource CardStrokeColorDefaultBrush}"/>

<!-- Polygon Finish Button (visible only when drawing polygon) -->
   <Button x:Name="FinishPolygonButton"
      Style="{StaticResource AppAccentButtonStyle}"
      Click="FinishPolygonButton_Click"
      Visibility="Collapsed"
       ToolTipService.ToolTip="Finish Polygon (Complete shape)">
 <StackPanel Orientation="Horizontal" Spacing="8">
   <FontIcon FontFamily="{StaticResource SymbolThemeFontFamily}" Glyph="&#xE73E;"/>
   <TextBlock Text="Finish"/>
      </StackPanel>
        </Button>

        <!-- Canvas Size Info -->
 <Border Background="{ThemeResource LayerFillColorDefaultBrush}"
      CornerRadius="4"
  Padding="8,4"
    VerticalAlignment="Center">
  <TextBlock>
   <Run Text="Canvas: "/>
      <Run Text="{x:Bind ViewModel.CanvasWidth, Mode=OneWay}"/>
<Run Text="x"/>
    <Run Text="{x:Bind ViewModel.CanvasHeight, Mode=OneWay}"/>
    </TextBlock>
 </Border>

        <Border Width="1" Background="{ThemeResource CardStrokeColorDefaultBrush}"/>

 <Button x:Name="ClearButton" 
     Style="{StaticResource IconButtonStyle}" 
  Command="{x:Bind ViewModel.ClearCanvasCommand}"
ToolTipService.ToolTip="Clear Canvas">
    <FontIcon FontFamily="{StaticResource SymbolThemeFontFamily}" Glyph="&#xE894;"/>
  </Button>
     
      <Button x:Name="SaveButton" 
    Style="{StaticResource AppAccentButtonStyle}"
    Command="{x:Bind ViewModel.SaveAsTemplateCommand}"
      ToolTipService.ToolTip="Save as Template">
   <StackPanel Orientation="Horizontal" Spacing="8">
  <FontIcon FontFamily="{StaticResource SymbolThemeFontFamily}" Glyph="&#xE74E;"/>
  <TextBlock Text="Save"/>
  </StackPanel>
  </Button>
     </StackPanel>
  </Grid>
        </Border>

        <!-- Canvas Area -->
  <ScrollViewer Grid.Row="1" 
     HorizontalScrollBarVisibility="Auto"
       VerticalScrollBarVisibility="Auto"
    Padding="24">
   <Border Style="{StaticResource AppCardStyle}"
      HorizontalAlignment="Left"
   VerticalAlignment="Top">
       <Grid>
  <!-- Canvas Background with Fixed Size -->
  <Border x:Name="CanvasBackground" 
  CornerRadius="4"
      BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
     BorderThickness="1"
    Width="{x:Bind ViewModel.CanvasWidth, Mode=OneWay}"
       Height="{x:Bind ViewModel.CanvasHeight, Mode=OneWay}">
            <Border.Background>
    <SolidColorBrush x:Name="CanvasBackgroundBrush" Color="White"/>
       </Border.Background>

        <!-- Drawing Canvas - Fixed Size -->
      <Canvas x:Name="DrawingCanvas" 
     Background="Transparent"
           Width="{x:Bind ViewModel.CanvasWidth, Mode=OneWay}"
Height="{x:Bind ViewModel.CanvasHeight, Mode=OneWay}"/>
      </Border>

     <!-- Empty State -->
  <StackPanel x:Name="EmptyState" 
     Style="{StaticResource EmptyStateStyle}"
   Visibility="Collapsed">
   <FontIcon FontFamily="{StaticResource SymbolThemeFontFamily}" 
     Glyph="&#xE70F;" 
 FontSize="64"
      Opacity="0.3"/>
  <TextBlock Text="Select a tool and start drawing" 
      Style="{StaticResource SubtitleTextBlockStyle}"
        Opacity="0.6"/>
           <TextBlock Text="Choose a shape from the toolbar above" 
        Opacity="0.5"/>
   </StackPanel>
        </Grid>
   </Border>
    </ScrollViewer>
  </Grid>
</Page>
